= Updating Expiring Certificates
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

Connected apps enable a two-way connection between Anypoint Platform and Salesforce organizations. The connected apps are dependent on digital certificates for proper functionality. These certificates are time-bound and subject to expiration. However, API Experience Hub continues to function properly when a certificates expires.

== How Certificates Are Generated
API Experience Hub generates a few self-signed certificates during the connection process that expire in one year.

A self-signed certificate is generated to link the Anypoint Platform organization and the Salesforce organization. The certificate and the private key is stored in Secrets Manager in Anypoint Security. When this certificate expires, there is no notification sent to the administer of the Salesforce instance. The connection between Anypoint Platform and Salesforce remains operational during the initial connection. The next time the portal administrator logs in to API Experience Hub, an error message displays a connection error and enables the administrator to reconnect. When the administrator logs back in to API Experience Hub, a new certificate is automatically generated and expires in one year. 

API Experience Hub uses a Salesforce metadata API to generate an Anypoint certificate during the connection process. The connected app uses this certificate to access metadata content from Anypoint. This certificate is also valid for one year. An email is sent to the administrator of the Salesforce instance 30 days before the certificate expires. Because a named credential uses the Anypoint certificate, the certificate cannot be deleted initially. To generate a new Anypoint certificate, the certificate must be renamed to trigger a diagnostic check to fail and create a new Anypoint certificate. After renaming the certificate, the portal administrator can log back in to API Experience Hub successfully. As a best practice, the administrator of the Salesforce instance should delete the renamed certificate because the maximum number of Salesforce certificates is 50.

For more information about named credentials, see https://help.salesforce.com/s/articleView?id=sf.named_credentials_about.htm&type=5[Named Credentials].

== Before You Begin
Before getting started, ensure you have the API Experience Hub Administrator permissions.


== Update the Salesforce Identity Data Certificate 
To generate a new Anypoint certificate:

. Go to Salesforce and click *Setup* > *Security* > *Certificate and Key Management*.
. Locate *Anypoint* in the list and click *Edit*.
. Enter a new name, for example, *Anypoint to expire*. 
+
image::aeh-rename-cert.png[Example for renaming the certificate]
. Click *Save*.
. Log in to API Experience Hub to trigger a diagnostic check to create a new certificate.
. Delete the renamed certificate, for example, *Anypoint to expire*: 
.. Go to Salesforce and click *Setup* > *Security* > *Certificate and Key Management*.
.. Locate the renamed certificate in the list and click *Delete*.

